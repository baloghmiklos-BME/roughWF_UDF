; Read case and data files
file read-case-data tutorial_case_initialized.cas.h5

; Compile and load UDF directory 
define user-defined c-f compile "libudf" yes "ABL_adaptive_roughness_case_A.c" "" ""
define user-defined compiled-functions load "libudf"

; Run 2000 iterations
solve it 2000

; Write case and data files
file write-case-data tutorial_case_it_%i.cas.h5 ok

; Export the velocity and TKE profiles at the outlet
surface line-surface line_out 4.59999 0 0 4.59999 0 1
plot plot y "text_files/mean_u_velocity_profiles" y y 0 0 1 n n x-velocity outlet ()
plot plot y "text_files/tke_profiles" y y 0 0 1 n n turb-kinetic-energy outlet ()
